query ExhibitionChapterPage(
  $locale: String!,
  $identifier: String!,
  $linkGroups: Boolean = true,
  $preview: Boolean = false
) {
  mainNavigation: linkGroupCollection(preview: $preview, locale: $locale, limit: 1, where: { identifier: "mainNavigation" }) @include(if: $linkGroups) {
    ...linkGroupFields
  }
  footerMoreInfo: linkGroupCollection(preview: $preview, locale: $locale, limit: 1, where: { identifier: "footerMoreInfo" }) @include(if: $linkGroups) {
    ...linkGroupFields
  }
  footerHelp: linkGroupCollection(preview: $preview, locale: $locale, limit: 1, where: { identifier: "footerHelp" }) @include(if: $linkGroups) {
    ...linkGroupFields
  }
  exhibitionChapterPageCollection(preview: $preview, locale: $locale, where: { identifier: $identifier }, limit: 1) {
    total
    items {
      linkedFrom {
        exhibitionPageCollection(limit: 1) {
          total
          items {
            name
            identifier
            credits
            hasPartCollection(limit: 20) {
              items {
                identifier
                name
                primaryImageOfPage {
                  image {
                    url
                    contentType
                  }
                }
              }
            }
          }
        }
      }
      name
      identifier
      headline
      description
      primaryImageOfPage {
        ... imageWithAttributionFields
      }
      hasPartCollection(limit: 20) {
        total
        items {
          __typename
          ... on ContentTypeRichText {
            text
          }
          ... on Embed {
            embed
          }
          ... on ImageWithAttribution {
            ... imageWithAttributionFields
          }
          ... on ImageComparison {
            name
            hasPartCollection(limit: 2) {
              items {
                ... imageWithAttributionFields
              }
            }
          }
          # CardGroup omitted intentionally
        }
      }
    }
  }
}

fragment linkGroupFields on LinkGroupCollection {
  items {
    identifier
    name
    links: linksCollection(limit: 10) {
      items {
        text
        url
      }
    }
  }
}

fragment imageWithAttributionFields on ImageWithAttribution {
  name
  creator
  provider
  license
  url
  image {
    url
    contentType
    width
    height
  }
}
